#cmake_minimum_required(VERSION 2.6)
#set(PACKAGE_SOURCE_CODE python_glue.c)
#set(PACKAGE_SCRIPT_CODE python_glue.k)
#
#find_library(PACKAGE_EXTRA_LIBRARY python)
#find_path(PY_INCLUDE_DIRS Python.h)
#message("find python path: " ${PY_INCLUDE_DIRS})
#include_directories(${PY_INCLUDE_DIRS})
#
#check_include_files(Python.h HAVE_PYTHON_H)
#if(PACKAGE_EXTRA_LIBRARY)
#	if(HAVE_PYTHON_H)
#		set(PACKAGE_ENV "PYTHONPATH=$ENV{PYTHONPATH}:${CMAKE_CURRENT_SOURCE_DIR}/test/")
#		add_konoha_package(python)
#	endif(HAVE_PYTHON_H)
#endif(PACKAGE_EXTRA_LIBRARY)

cmake_minimum_required(VERSION 2.6)
set(PACKAGE_SOURCE_CODE python_glue.c)
set(PACKAGE_SCRIPT_CODE python_glue.k)

find_library(PACKAGE_EXTRA_LIBRARY python)
set(VERSION 2.8 2.7 2.6 2.5 2.4 2.3 2.2 2.1 2.0)
if(NOT PACKAGE_EXTRA_LIBRARY)
	foreach(ver ${VERSION})
		find_library(PACKAGE_EXTRA_LIBRARY python${ver})
	endforeach(ver)
endif(NOT PACKAGE_EXTRA_LIBRARY)

find_path(PY_INCLUDE_DIRS Python.h)
include_directories(${PY_INCLUDE_DIRS})
message("find python path: " ${PY_INCLUDE_DIRS})
if(NOT ${PYTHON_INCLUDE_DIRS})
	foreach(ver ${VERSION})
		check_include_files(python${ver}/Python.h HAVE_PYTHON${ver}_H)
		if(HAVE_PYTHON${ver}_H)
			find_path(PY_INCLUDE_DIRS python${ver}/Python.h)
			message("find python path: " ${PY_INCLUDE_DIRS}/python${ver})
			include_directories(${PY_INCLUDE_DIRS}/python${ver})
			break()
		endif(HAVE_PYTHON${ver}_H)
	endforeach(ver)
endif(NOT ${PYTHON_INCLUDE_DIRS})

if(PACKAGE_EXTRA_LIBRARY)
	set(PACKAGE_ENV "PYTHONPATH=$ENV{PYTHONPATH}:${CMAKE_CURRENT_SOURCE_DIR}/test/")
	add_konoha_package(python)
endif(PACKAGE_EXTRA_LIBRARY)
